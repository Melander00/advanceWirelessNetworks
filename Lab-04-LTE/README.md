````markdown
# Lab 04 – LTE Downlink Performance

In this lab you will explore a simple LTE network scenario in ns-3. You will simulate a single eNodeB (base station) serving a UE (user equipment) in the downlink and investigate how throughput depends on application data rate and distance from the eNodeB. You will also collect LTE trace files (RLC and PDCP) to verify link performance.

## Learning Goals
- Learn how to set up an LTE simulation in ns-3 using the LTE/EPC helpers.
- Observe how application throughput saturates as offered traffic exceeds link capacity.
- Examine how throughput degrades with increasing distance from the base station.
- Work with LTE trace files (RLC, PDCP) for detailed performance analysis.

## Provided Files
- **docs/**
  - `Lab-04-Instructions.md` – lab description and steps.
  - `deliverables.md` – list of required submission files.
- **code/**
  - `Lab4_Cpp_LTE.cc` – C++ starter for LTE downlink scenario.
  - `Lab4_Py_LTE.py` – Python equivalent.
````
## Running the Code

**C++**:
```bash
cp Lab-04-LTE/code/Lab4_Cpp_LTE.cc ~/ns-allinone-3.40/ns-3.40/scratch/
cd ~/ns-allinone-3.40/ns-3.40
./ns3 build
./ns3 run scratch/Lab4_Cpp_LTE --dataRate=10Mbps --distance=100
```

**Python**:

```bash
python3 Lab-04-LTE/code/Lab4_Py_LTE.py --dataRate=10Mbps --distance=100
```

Adjust `--dataRate` and `--distance` as instructed to gather results.
Make sure you set antenna type to **isotropic** for distance experiments (required in deliverables).

---

## Data Collection

* **Throughput vs Offered Data Rate**

  * Fix distance (UE close to eNB).
  * Vary `--dataRate` across multiple values (below, at, and above link capacity).
  * Save results in `throughput_vs_rate.csv`.
  * Plot: `throughput_vs_rate_plot.png`.

* **Throughput vs Distance**

  * Fix application data rate (high enough to saturate the link).
  * Vary `--distance` parameter.
  * Save results in `throughput_vs_distance.csv`.
  * Plot: `throughput_vs_distance_plot.png`.

* **Trace Files**

  * Include `DlRlcStats.trace` and `DlPdcpStats.trace` generated by the simulation.

---

## Deliverables Checklist

(see `docs/deliverables.md` for details)

* `choice.txt` – language used (`C++` or `Python`).
* LTE trace files: `DlRlcStats.trace`, `DlPdcpStats.trace`.
* CSVs: `throughput_vs_rate.csv`, `throughput_vs_distance.csv`.
* Plots: `throughput_vs_rate_plot.png`, `throughput_vs_distance_plot.png`.

---

## Common Pitfalls

* **Trace files missing:** Ensure you enabled RLC/PDCP tracing (`lteHelper->EnableDlRlcTraces()` etc.). Empty or missing trace files will cost points.
* **Units in CSVs:** Label offered data rate in Mbps, throughput in bps (or Mbps if consistent). Be clear and consistent.
* **Throughput vs distance setup:** Use isotropic antennas, not parabolic/directional, otherwise distance results may be unrealistic.
* **Application type:** Use UDP or constant bitrate traffic as instructed; TCP may produce unexpected curves.
* **Plot clarity:** Plots must have axes labels, units, and legends.

---
